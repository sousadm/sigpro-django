<script>

</script>

{% extends "core/base.html" %}
{% load bootstrap %}
{% load static %}
{% block title %} Pessoa {% endblock %}

{% block content %}

<div class="container">
    <form method="post">

        {% csrf_token %}

        <div class="card">
            <div class="card-header">
                <h3>Cadastro de Pessoa</h3>
            </div>
            <div class="card-body">

                <div class="row">
                    <div class="col-12 col-md-2">
                        {{ form.uuid|bootstrap }}
                    </div>
                    <div class="col-12 col-md-10">
                        {{ form.nome|bootstrap }}
                    </div>
                </div>

                <div class="row">
                    <div class="col-12 col-md-3">
                        {{ form.fone|bootstrap }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.email|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ tipo_definido }}
                        <label>Tipo de Pessoa</label>
                        <select name="tipoPessoa" id="tipoPessoa" class="form-control"
                                onchange="selecionaTipoChange(this)">
                            {% for choice in form.tipoPessoa.field.choices %}
                                <option value="{{ choice.0 }}" {% if choice.0 == tipo_selected %} selected {% endif %}>{{ choice.1 }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="row" id="fisica">
                    <div class="col-12 col-md-2">
                        {{ form.cpf|bootstrap }}
                    </div>
                    <div class="col-12 col-md-2">
                        {{ form.identidade|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.emissao|bootstrap }}
                    </div>
                    <div class="col-12 col-md-2">
                        {{ form.orgao|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.nascimento|bootstrap }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.pai|bootstrap }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.mae|bootstrap }}
                    </div>

                    <div class="col-12 col-md-4">
                        {{ form.idEstrangeiro|bootstrap }}
                    </div>
                    <div class="col-12 col-md-4">
                        {{ form.nacionalidade|bootstrap }}
                    </div>
                    <div class="col-12 col-md-4">
                        {{ form.naturalidade|bootstrap }}
                    </div>

                </div>

                <div class="row" id="juridica">
                    <div class="col-12 col-md-4">
                        {{ form.cnpj|bootstrap }}
                    </div>
                    <div class="col-12 col-md-8">
                        {{ form.fantasia|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.IE|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.cnae|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.fundacao|bootstrap }}
                    </div>
                    <div class="col-12 col-md-3">
                        {{ form.incentivoCultural|bootstrap }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.regime|bootstrap }}
                    </div>
                    <div class="col-12 col-md-6">
                        {{ form.tipoIE|bootstrap }}
                    </div>
                </div>

            </div>
        </div>

        <div class="footer bg-red">
            <button type="submit" value="btn_novo" name="btn_novo" class="btn btn-secondary">
                <i class="fa fa-file"></i> Novo
            </button>
            <button type="submit" value="btn_salvar" name="btn_salvar" class="btn btn-success">
                <i class="fas fa-save"></i> Salvar
            </button>
        </div>

    </form>
</div>

<script>

    document.addEventListener('DOMContentLoaded', function() {
        var sel = document.getElementById('tipoPessoa');
        selecionaTipoChange(sel);
    });

    function selecionaTipoChange(sel) {

        var element_fisica = document.getElementById('fisica');
        element_fisica.style.display = sel.value == 'FISICA' ? 'flex' : 'none';

        var element_juridica = document.getElementById('juridica');
        element_juridica.style.display = sel.value == 'JURIDICA' ? 'flex' : 'none';

        //document.getElementById('id_tipoPessoa') = sel.value;

    }

</script>

<script>
    const fieldWithTooltip = document.querySelector('.field-with-tooltip');
    const helpText = "{{ form.naturalidade.help_text }}";

    fieldWithTooltip.addEventListener("mouseover", function() {
        const tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.innerText = helpText;
        document.body.appendChild(tooltip);
    });

    fieldWithTooltip.addEventListener("mouseout", function() {
        const tooltip = document.querySelector('.tooltip');
        if (tooltip) {
            tooltip.remove();
        }
    });
</script>


{% endblock %}